<p id="notice"><%= notice %></p>

<div class="card shadow p-3 mb-5 bg-white rounded">
  <p>
    <strong>First name:</strong>
    <%= @customer.first_name %>
  </p>

  <p>
    <strong>Last name:</strong>
    <%= @customer.last_name %>
  </p>

  <p>
    <strong>Phone:</strong>
    <%= @customer.phone %>
  </p>

  <p>
    <strong>Email:</strong>
    <%= @customer.email %>
  </p>

</div>

<%= link_to 'Edit', edit_customer_path(@customer), class: "btn btn-primary" %>
<%= link_to 'Back', customers_path, class: "btn btn-primary" %>


<br>

<% has_orders = false %>
<% orders_array = Order.all %>
<% orders_array.each do |order| %>
  <% if order.customer_id == @customer.id %>
    <% has_orders = true %>
    <% break %>
  <% end %>
<% end %>

<% if has_orders %>
<br>
<table class="table">
  <thead>
    <tr>
      <th>Product Name</th>
      <th>Product Count</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% orders_array.each do |order| %>
      <% if order.customer_id == @customer.id %>
      <tr>
        <td><%= order.product_name %></td>
        <td><%= order.product_count %></td>
        <td><%= link_to 'Show', order, class: "btn btn-primary" %></td>
        <td><%= link_to 'Edit', edit_order_path(order), class: "btn btn-primary" %></td>
        <td><%= link_to 'Destroy', order, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-primary" %></td>
      </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<% end %>

<!--
<% orders_array = Order.all %>
<% orders_array.each do |order| %>
<% if order.customer_id == @customer.id %>
<p> Product Name: <%= order.product_name %> </p>
<p> Product Count: <%= order.product_count %> </p>
<% end %>
<% end %> -->